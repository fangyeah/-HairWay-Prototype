<div class="app-root">
  <!-- 頂部導覽 -->
  <header class="header-bar">
    <div class="header-title">圓禿照護服務數位平台｜HairWay Prototype</div>
    <nav class="header-nav">
      <button class="nav-btn active" data-page="home">首頁</button>
      <button class="nav-btn" data-page="survey">問卷檢測</button>
      <button class="nav-btn" data-page="community">病友社群</button>
      <button class="nav-btn" data-page="articles">衛教文章</button>
      <button class="nav-btn" data-page="partners">合作夥伴資訊</button>
    </nav>
  </header>

<link rel="stylesheet" href="style.css" />
<script src="script.js" defer></script>

  <!-- 主內容 -->
  <main class="main">

    <!-- 首頁 -->
    <section class="page active" id="page-home">
      <h1 class="page-title">首頁</h1>
      <p class="page-sub">
        依照你的需求，從下列四個服務開始使用 HairWay。
      </p>

      <div class="home-grid">
        <!-- 問卷 -->
        <section class="card">
          <h2 class="card-title">問卷檢測（症狀＆心情）</h2>
          <p class="text-sm">
            透過 5 題小測驗，了解目前圓禿狀況與心理需要，作為之後病友 1 對 1 小天使配對的依據。
          </p>
          <button class="btn btn-primary" data-go="survey">開始問卷檢測</button>
        </section>

        <!-- 病友社群 -->
        <section class="card">
          <div class="home-card-header">
            <h2 class="card-title">病友社群（Peer 社群）</h2>
            <!-- 卡片上的小輝 icon -->
            <span class="hui-mini">
              <svg viewBox="0 0 80 80" aria-hidden="true">
                <!-- 頭髮 -->
                <rect x="18" y="10" width="44" height="24" rx="10" fill="#5b4331" />
                <!-- 臉 -->
                <rect x="18" y="18" width="44" height="40" rx="16" fill="#f7d2b5" />
                <!-- 眼白 -->
                <circle cx="30" cy="32" r="6" fill="#ffffff" />
                <circle cx="50" cy="32" r="6" fill="#ffffff" />
                <!-- 瞳孔 -->
                <circle cx="30" cy="32" r="3" fill="#111827" />
                <circle cx="50" cy="32" r="3" fill="#111827" />
                <!-- 嘴巴 -->
                <path d="M30 44 Q40 52 50 44" fill="#e1565a" />
                <!-- 身體 -->
                <rect x="20" y="46" width="40" height="24" rx="10" fill="#1458c3" />
                <!-- HAIRWAY 字 -->
                <text x="40" y="62" text-anchor="middle" font-size="8" fill="#ffffff" font-weight="600">
                  HAIRWAY
                </text>
              </svg>
            </span>
          </div>
          <p class="text-sm">
            根據問卷結果，由小輝協助媒合 1 對 1 病友小天使，啟動 14 天任務。每天完成一個小步驟，
            練習「被理解」與「走下去的力量」。
          </p>
          <button class="btn btn-outline" data-go="community">了解病友社群</button>
        </section>

        <!-- 衛教文章 -->
        <section class="card">
          <h2 class="card-title">衛教文章</h2>
          <p class="text-sm">
            由皮膚科醫師與心理師審稿的衛教內容，整理「看診前要準備什麼？」「怎麼跟家人開口？」
            「掉髮日常照護」等實用文章。
          </p>
          <button class="btn btn-outline" data-go="articles">查看衛教文章</button>
        </section>

        <!-- 合作夥伴 -->
        <section class="card">
          <h2 class="card-title">合作夥伴資訊</h2>
          <p class="text-sm">
            依照所在城市，推薦皮膚科診所、美髮設計與心理諮商所，附上星等評價、距離與服務特色標籤。
          </p>
          <button class="btn btn-outline" data-go="partners">查看附近資源</button>
        </section>
      </div>
    </section>

    <!-- 問卷檢測 -->
    <section class="page" id="page-survey">
      <h1 class="page-title">問卷檢測｜症狀＆心情小測驗（配對用）</h1>
      <p class="page-sub">
        說明：本測驗僅用於病友社群配對與平台內回饋，不作為診斷證明；若有疑慮請優先諮詢專業醫師。
      </p>

      <div class="survey-layout">
        <section class="card survey-card">
          <div class="survey-header">
            <div class="survey-title-row">
              <div class="survey-label">小測驗第 <span id="survey-step">1</span> 題</div>
              <div class="survey-sub">完成度 <span id="survey-progress-text">1 / 5</span></div>
            </div>
            <div class="survey-progress">
              <div class="survey-progress-inner" id="survey-progress-bar"></div>
            </div>
          </div>

          <div id="survey-question-box"></div>

          <div class="survey-footer">
            <button class="btn btn-ghost" id="survey-prev">上一題</button>
            <button class="btn btn-primary" id="survey-next">下一題</button>
          </div>
        </section>

        <aside class="card survey-side">
          <h2 class="card-title">小輝的初步觀察</h2>
          <p class="text-sm" id="survey-summary">
            目前還在收集你的狀況與期待。回答越多，我就越能幫你找到適合的病友小天使。
          </p>
          <ul class="text-xs">
            <li>完成所有題目後，會標註提示：偏向「輕度焦慮」、「需要更多陪伴」等。</li>
            <li>未來可接到提醒：例如建議優先媒合心理支持型、或實際經驗分享型的小天使。</li>
          </ul>
        </aside>
      </div>
    </section>

    <!-- 病友社群（同頁顯示） -->
    <section class="page" id="page-community">
      <h1 class="page-title">病友社群（Peer 社群）</h1>
      <p class="page-sub">
        病友社群分為「1 對 1 小天使任務」與「病友交流版」。以下為平台的 Demo 版畫面。
      </p>

      <div class="community-layout">
        <!-- 1 對 1 小天使聊天室 -->
        <section class="card chat-panel">
          <div class="chat-header">
            <div>
              <div class="chat-title">1 對 1 小天使任務聊天室</div>
              <div class="chat-sub">目前配對對象：<span id="chat-partner-name"></span></div>
            </div>
            <span class="chat-day" id="chat-day-chip">Day 1 / 14</span>
          </div>
          <div class="chat-body" id="chat-messages"></div>
          <div class="chat-footer">
            <input
              id="chat-input"
              class="chat-input"
              placeholder="輸入訊息（禁止交換 IG / Line 等個資）"
            />
            <button class="btn btn-primary" id="chat-send">送出</button>
          </div>
        </section>

        <!-- 任務＆交流版說明 -->
        <aside class="card community-side">
          <h2 class="card-title">我的 14 天任務</h2>
          <p class="text-sm">
            每天完成 1 個小任務（分享心情、寫下今天最想感謝的人等），連續 14 天後，即可解鎖「病友交流版」發文與留言功能。
          </p>
          <div class="progress-box">
            <div class="progress-label">
              目前進度：Day <span id="mission-day">1</span> / 14
            </div>
            <div class="progress-bar">
              <div class="progress-inner" id="mission-progress"></div>
            </div>
            <button class="btn btn-outline" id="mission-finish-today">完成今日任務（Demo）</button>
          </div>

          <div class="community-board">
            <h3 class="card-subtitle">病友交流版（1 對多）</h3>
            <p class="text-sm">
              完成 14 天任務後，可以在交流版匿名發文與留言。下方為示意貼文：
            </p>
            <div class="post-demo">
              <div class="post-meta">匿名・今天・分類：心情</div>
              <div class="post-title">[心情] 今天第一次敢把帽子拿下來</div>
              <p class="text-sm">
                在診間外面等候的時候，突然覺得自己好像沒那麼孤單，謝謝大家分享的故事，讓我也想試著勇敢一點。
              </p>
              <div class="post-actions">
                <button class="btn btn-ghost btn-xs">👍 讚</button>
                <button class="btn btn-ghost btn-xs" id="board-reply-btn">💬 留言（Demo）</button>
              </div>
            </div>
          </div>
        </aside>
      </div>
    </section>

    <!-- 衛教文章 -->
    <section class="page" id="page-articles">
      <h1 class="page-title">衛教文章</h1>
      <p class="page-sub">
        由皮膚科醫師與心理師審稿的衛教內容，整理「治療前 / 治療中 / 治療後」不同階段會遇到的問題。
      </p>

      <div class="article-grid" id="article-list"></div>
    </section>

    <!-- 合作夥伴資訊 -->
    <section class="page" id="page-partners">
      <h1 class="page-title">合作夥伴資訊（診所 / 美髮 / 心理）</h1>
      <p class="page-sub">
        依所在城市顯示合作皮膚科、美髮店與心理諮商所資訊，包含距離與服務亮點。
      </p>

      <div class="partner-filter">
        <span class="text-xs">選擇城市：</span>
        <div class="partner-city-group">
          <button class="chip-chip active" data-city="台北">台北</button>
          <button class="chip-chip" data-city="台中">台中</button>
          <button class="chip-chip" data-city="高雄">高雄</button>
        </div>
      </div>

      <div class="partner-grid" id="partner-list"></div>
    </section>
  </main>

  <!-- 小輝浮動按鈕 -->
  <button class="hui-fab" id="huiFab" aria-label="打開小輝選單">
    <div class="hui-avatar">
      <svg viewBox="0 0 80 80" aria-hidden="true">
        <!-- 頭髮 -->
        <rect x="18" y="10" width="44" height="24" rx="10" fill="#5b4331" />
        <!-- 臉 -->
        <rect x="18" y="18" width="44" height="40" rx="16" fill="#f7d2b5" />
        <!-- 眼白 -->
        <circle cx="30" cy="32" r="6" fill="#ffffff" />
        <circle cx="50" cy="32" r="6" fill="#ffffff" />
        <!-- 瞳孔 -->
        <circle cx="30" cy="32" r="3" fill="#111827" />
        <circle cx="50" cy="32" r="3" fill="#111827" />
        <!-- 微笑嘴巴 -->
        <path d="M30 44 Q40 52 50 44" fill="#e1565a" />
        <!-- 身體 -->
        <rect x="20" y="46" width="40" height="24" rx="10" fill="#1458c3" />
        <!-- HAIRWAY -->
        <text x="40" y="62" text-anchor="middle" font-size="8" fill="#ffffff" font-weight="600">
          HAIRWAY
        </text>
      </svg>
    </div>
    <span class="hui-fab-text">需要小輝帶路嗎？</span>
  </button>

  <!-- 小輝選單 Modal -->
  <div class="hui-modal" id="huiModal">
    <div class="hui-modal-card">
      <div class="hui-modal-header">
        <div class="hui-avatar hui-avatar-sm">
          <svg viewBox="0 0 80 80" aria-hidden="true">
            <rect x="18" y="10" width="44" height="24" rx="10" fill="#5b4331" />
            <rect x="18" y="18" width="44" height="40" rx="16" fill="#f7d2b5" />
            <circle cx="30" cy="32" r="6" fill="#ffffff" />
            <circle cx="50" cy="32" r="6" fill="#ffffff" />
            <circle cx="30" cy="32" r="3" fill="#111827" />
            <circle cx="50" cy="32" r="3" fill="#111827" />
            <path d="M30 44 Q40 52 50 44" fill="#e1565a" />
            <rect x="20" y="46" width="40" height="24" rx="10" fill="#1458c3" />
            <text x="40" y="62" text-anchor="middle" font-size="8" fill="#ffffff" font-weight="600">
              HAIRWAY
            </text>
          </svg>
        </div>
        <div>
          <div class="hui-modal-title">小輝在這裡 ✋</div>
          <div class="hui-modal-sub">想帶你去哪一個區塊？</div>
        </div>
        <button class="hui-close" id="huiCloseBtn">✕</button>
      </div>

      <div class="hui-menu">
        <button class="hui-menu-item" data-go="survey">問卷檢測（症狀＆心情）</button>
        <button class="hui-menu-item" data-go="community">病友社群（Peer 社群）</button>
        <button class="hui-menu-item" data-go="articles">衛教文章</button>
        <button class="hui-menu-item" data-go="partners">合作夥伴資訊（診所 / 美髮 / 心理）</button>
      </div>
    </div>
  </div>

  <!-- Toast 小提示 -->
  <div class="toast" id="toast"></div>
</div>